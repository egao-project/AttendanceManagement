package action;

import java.util.Calendar;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import action.form.AM_form;

public class Work_Start extends Action {

	public ActionForward AM_form(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response)
			throws Exception {

		// AM_formとの定義
		AM_form queryForm = (AM_form) form;

		// 現在時間
		Calendar now = Calendar.getInstance();
		int nowHour = now.get(Calendar.HOUR_OF_DAY);		// 現在 時
		int nowMinute = now.get(Calendar.MINUTE); 			// 現在 分
		queryForm.setNowHour(String.valueOf(nowHour));		// 現在時をStringでAM_formにセット
		queryForm.setNowHour(String.valueOf(nowMinute));	// 現在分をStringでAM_formにセット

		// 繰り上げ用の時間
		int startHour = nowHour;							// 繰上げ 時
		int startMinute = 0;								// 繰上げ 分

		// 15分単位の時間に変更
		if (nowMinute == 0) {
			startMinute = 0;
		} else if (nowMinute <= 15) {
			startMinute = 15;
		} else if (nowMinute <= 30) {
			startMinute = 30;
		} else if (nowMinute <= 45) {
			startMinute = 45;
		} else {
			startMinute = 0;
			startHour = nowHour + 1;
		}

		// マッピングに値を返す
		return (mapping.findForward("Start"));
	}
}